# Delivery Office API

# –¢–µ–º–∞: 
–í–µ–¥–µ–Ω–∏–µ —É—á–µ—Ç–∞ –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è —Å–ª—É–∂–±—ã –¥–æ—Å—Ç–∞–≤–∫–∏  

# –†–∞–∑—Ä–∞–±–æ—Ç–∞–ª: 
 –ò–≤–∞–Ω–æ–≤ –î–º–∏—Ç—Ä–∏–π –ê–Ω–¥—Ä–µ–µ–≤–∏—á –ò–ü-21-3

## üìú –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

1. [–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞](#–æ–ø–∏—Å–∞–Ω–∏–µ-–ø—Ä–æ–µ–∫—Ç–∞)
2. [–û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª](#–æ—Å–Ω–æ–≤–Ω–æ–π-—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª)
   - [–†–∞–±–æ—Ç–∞ —Å –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞–º–∏](#—Ä–∞–±–æ—Ç–∞-—Å-–ø–æ—Å—Ç–∞–≤—â–∏–∫–∞–º–∏)
   - [–†–∞–±–æ—Ç–∞ —Å –ø–æ–∫—É–ø–∞—Ç–µ–ª—è–º–∏](#—Ä–∞–±–æ—Ç–∞-—Å-–ø–æ–∫—É–ø–∞—Ç–µ–ª—è–º–∏)
   - [–†–∞–±–æ—Ç–∞ —Å –Ω–∞–∫–ª–∞–¥–Ω—ã–º–∏](#—Ä–∞–±–æ—Ç–∞-—Å-–Ω–∞–∫–ª–∞–¥–Ω—ã–º–∏)
   - [–†–∞–±–æ—Ç–∞ —Å —Ç–æ–≤–∞—Ä–∞–º–∏](#—Ä–∞–±–æ—Ç–∞-—Å-—Ç–æ–≤–∞—Ä–∞–º–∏)
3. [–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫](#Ô∏è—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π-—Å—Ç–µ–∫)
4. [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
   - [–ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è](#1-–∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è)
   - [–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π](#2-–≤—ã–ø–æ–ª–Ω–∏—Ç–µ-–º–∏–≥—Ä–∞—Ü–∏–∏-–¥–ª—è-—Å–æ–∑–¥–∞–Ω–∏—è-–±–∞–∑—ã-–¥–∞–Ω–Ω—ã—Ö)
   - [–ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è](#3-–∑–∞–ø—É—Å–∫-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)
5. [ER-–¥–∏–∞–≥—Ä–∞–º–º–∞ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö](#–æ–ø–∏—Å–∞–Ω–∏–µ-—Å—Ç—Ä—É–∫—Ç—É—Ä—ã-–±–∞–∑—ã-–¥–∞–Ω–Ω—ã—Ö)
   - [–î–∏–∞–≥—Ä–∞–º–º–∞](#-ER-–¥–∏–∞–≥—Ä–∞–º–º–∞-–±–∞–∑—ã-–¥–∞–Ω–Ω—ã—Ö)
   - [–ü—Ä–∏–º–µ—Ä –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö](#–¥–∞–Ω–Ω—ã–µ-–¥–ª—è-–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ-—Ç–∞–±–ª–∏—Ü)

---

## üì¶ –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
Delivery Office API ‚Äî —ç—Ç–æ RESTful API, —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–µ –Ω–∞ ASP.NET Core, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω–æ–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–∞–∫–ª–∞–¥–Ω—ã–º–∏ —Å–ª—É–∂–±—ã –¥–æ—Å—Ç–∞–≤–∫–∏. –û–Ω–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞–º–∏, –ø–æ–∫—É–ø–∞—Ç–µ–ª—è–º–∏, —Ç–æ–≤–∞—Ä–∞–º–∏ –∏ –Ω–∞–∫–ª–∞–¥–Ω—ã–º–∏, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è –≥–∏–±–∫–æ—Å—Ç—å –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã.

---

## üìö –û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

### üîπ –†–∞–±–æ—Ç–∞ —Å –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞–º–∏
- –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞.
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ –ø–æ—Å—Ç–∞–≤—â–∏–∫–µ.
- –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞.
- –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤ –∏ –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.

### üîπ –†–∞–±–æ—Ç–∞ —Å –ø–æ–∫—É–ø–∞—Ç–µ–ª—è–º–∏
- –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–æ–∫—É–ø–∞—Ç–µ–ª—è.
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ.
- –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–∫—É–ø–∞—Ç–µ–ª—è.
- –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã—Ö –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö.

### üîπ –†–∞–±–æ—Ç–∞ —Å –Ω–∞–∫–ª–∞–¥–Ω—ã–º–∏
- –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞.
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Å–≤–µ–¥–µ–Ω–∏–π.
- –£–¥–∞–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤.
- –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Å –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ (–ø–æ—Å—Ç–∞–≤—â–∏–∫–∏, –ø–æ–∫—É–ø–∞—Ç–µ–ª–∏, —Ç–æ–≤–∞—Ä—ã).

### üîπ –†–∞–±–æ—Ç–∞ —Å —Ç–æ–≤–∞—Ä–∞–º–∏
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–æ–º —Ç–æ–≤–∞—Ä–æ–≤.
- –°–≤—è–∑—å —Ç–æ–≤–∞—Ä–æ–≤ —Å –Ω–∞–∫–ª–∞–¥–Ω—ã–º–∏.

---

## ‚öôÔ∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- **–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞**: ASP.NET Core 7.0
- **ORM**: Entity Framework Core
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: SQL Server / InMemory (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
- **–ú–∞–ø–ø–∏–Ω–≥ –æ–±—ä–µ–∫—Ç–æ–≤**: AutoMapper
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: 
  - xUnit
  - Moq
  - FluentAssertions
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: Swagger

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
```bash
git clone https://github.com/Mai-kun/DeliveryOfficeAPI.git
cd delivery-office-api
```

### 2. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:
```CLI
dotnet ef database update
```

### 3. –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```bash
dotnet run
```
---

## –û–ø–∏—Å–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ —Å–ª–µ–¥—É—é—â–∏—Ö –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü:
- **Suppliers**: –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞—Ö.
- **Buyers**: –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–∫—É–ø–∞—Ç–µ–ª—è—Ö.
- **Bills**: –Ω–∞–∫–ª–∞–¥–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ —Å–≤—è–∑—ã–≤–∞—é—Ç –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤ –∏ –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π.
- **Products**: —Ç–æ–≤–∞—Ä—ã, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –Ω–∞–∫–ª–∞–¥–Ω—ã–º–∏.

### ER-–¥–∏–∞–≥—Ä–∞–º–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:
```mermaid
erDiagram
    Bills {
        guid Id PK
        datetimeoffset Date
        string Warehouse
        int TotalAmount
        boolean IsPaid
        guid BuyerId FK
        guid SupplierId FK
        datetimeoffset CreatedAt
        datetimeoffset ModifiedAt
        boolean IsDeleted
    }

    Products {
        guid Id PK
        string Name
        int Quantity
        string Unit
        int Price
        datetimeoffset CreatedAt
        datetimeoffset ModifiedAt
        boolean IsDeleted
    }

    BillProduct {
      guid BillsId PK
      guid ProductsId PK
    }

    Buyers {
        guid Id PK
        string Name
        datetimeoffset CreatedAt
        datetimeoffset ModifiedAt
        boolean IsDeleted
    }

    Suppliers {
        guid Id PK
        string Name
        string Address
        datetimeoffset CreatedAt
        datetimeoffset ModifiedAt
        boolean IsDeleted
    }

    Buyers ||--o{ Bills : ""
    Suppliers ||--o{ Bills : ""
    Bills ||--o{ BillProduct : ""
    Products ||--o{ BillProduct : ""
```
### –î–∞–Ω–Ω—ã–µ –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü:
```SQL
INSERT INTO Suppliers (Id, Name, Address, CreatedAt, ModifiedAt, IsDeleted)
VALUES 
(NEWID(), 'Supplier A', 'Market Street, 123', GETDATE(), NULL, 0),
(NEWID(), 'Supplier B', 'Central Avenue, 456', GETDATE(), NULL, 0),
(NEWID(), 'Supplier C', 'Industrial Park, 789', GETDATE(), NULL, 0),
(NEWID(), 'Supplier D', 'Warehouse Street, 321', GETDATE(), NULL, 0),
(NEWID(), 'Supplier E', 'Outskirts Street, 654', GETDATE(), NULL, 0)
GO
INSERT INTO Buyers (Id, Name, CreatedAt, ModifiedAt, IsDeleted)
VALUES 
(NEWID(), 'Buyer 1', GETDATE(), NULL, 0),
(NEWID(), 'Buyer 2', GETDATE(), NULL, 0),
(NEWID(), 'Buyer 3', GETDATE(), NULL, 0),
(NEWID(), 'Buyer 4', GETDATE(), NULL, 0),
(NEWID(), 'Buyer 5', GETDATE(), NULL, 0);
GO
INSERT INTO Products (Id, Name, Quantity, Unit, Price, CreatedAt, ModifiedAt, IsDeleted)
VALUES 
(NEWID(), 'Product A', 100, 'pcs', 15.99, GETDATE(), NULL, 0),
(NEWID(), 'Product B', 200, 'pcs', 25.49, GETDATE(), NULL, 0),
(NEWID(), 'Product C', 300, 'pcs', 35.00, GETDATE(), NULL, 0),
(NEWID(), 'Product D', 150, 'pcs', 10.75, GETDATE(), NULL, 0),
(NEWID(), 'Product E', 250, 'pcs', 5.50, GETDATE(), NULL, 0);
GO
DECLARE @Supplier1 UNIQUEIDENTIFIER = (SELECT Id FROM Suppliers ORDER BY Id OFFSET 0 ROWS FETCH NEXT 1 ROWS ONLY);
DECLARE @Supplier2 UNIQUEIDENTIFIER = (SELECT Id FROM Suppliers ORDER BY Id OFFSET 1 ROWS FETCH NEXT 1 ROWS ONLY);
DECLARE @Supplier3 UNIQUEIDENTIFIER = (SELECT Id FROM Suppliers ORDER BY Id OFFSET 2 ROWS FETCH NEXT 1 ROWS ONLY);
DECLARE @Supplier4 UNIQUEIDENTIFIER = (SELECT Id FROM Suppliers ORDER BY Id OFFSET 3 ROWS FETCH NEXT 1 ROWS ONLY);
DECLARE @Supplier5 UNIQUEIDENTIFIER = (SELECT Id FROM Suppliers ORDER BY Id OFFSET 4 ROWS FETCH NEXT 1 ROWS ONLY);
DECLARE @Buyer1 UNIQUEIDENTIFIER = (SELECT Id FROM Buyers ORDER BY Id OFFSET 0 ROWS FETCH NEXT 1 ROWS ONLY);
DECLARE @Buyer2 UNIQUEIDENTIFIER = (SELECT Id FROM Buyers ORDER BY Id OFFSET 1 ROWS FETCH NEXT 1 ROWS ONLY);
DECLARE @Buyer3 UNIQUEIDENTIFIER = (SELECT Id FROM Buyers ORDER BY Id OFFSET 2 ROWS FETCH NEXT 1 ROWS ONLY);
DECLARE @Buyer4 UNIQUEIDENTIFIER = (SELECT Id FROM Buyers ORDER BY Id OFFSET 3 ROWS FETCH NEXT 1 ROWS ONLY);
INSERT INTO Bills (Id, Date, Warehouse, TotalAmount, IsPaid, BuyerId, SupplierId, CreatedAt, ModifiedAt, IsDeleted)
VALUES 
(NEWID(), GETDATE(), 'Warehouse A', 500.00, 1, @Buyer1, @Supplier1, GETDATE(), NULL, 0),
(NEWID(), GETDATE(), 'Warehouse B', 100.00, 0, @Buyer2, @Supplier2, GETDATE(), NULL, 0),
(NEWID(), GETDATE(), 'Warehouse C', 750.00, 1, @Buyer3, @Supplier3, GETDATE(), NULL, 0),
(NEWID(), GETDATE(), 'Warehouse D', 300.00, 0, @Buyer4, @Supplier4, GETDATE(), NULL, 0),
(NEWID(), GETDATE(), 'Warehouse E', 200.00, 1, @Buyer4, @Supplier5, GETDATE(), NULL, 0);
GO
DECLARE @Bill1 UNIQUEIDENTIFIER = (SELECT Id FROM Bills ORDER BY Id OFFSET 0 ROWS FETCH NEXT 1 ROWS ONLY);
DECLARE @Bill2 UNIQUEIDENTIFIER = (SELECT Id FROM Bills ORDER BY Id OFFSET 1 ROWS FETCH NEXT 1 ROWS ONLY);
DECLARE @Bill3 UNIQUEIDENTIFIER = (SELECT Id FROM Bills ORDER BY Id OFFSET 2 ROWS FETCH NEXT 1 ROWS ONLY);
DECLARE @Bill4 UNIQUEIDENTIFIER = (SELECT Id FROM Bills ORDER BY Id OFFSET 3 ROWS FETCH NEXT 1 ROWS ONLY);
DECLARE @Bill5 UNIQUEIDENTIFIER = (SELECT Id FROM Bills ORDER BY Id OFFSET 4 ROWS FETCH NEXT 1 ROWS ONLY);
DECLARE @Product1 UNIQUEIDENTIFIER = (SELECT Id FROM Products ORDER BY Id OFFSET 0 ROWS FETCH NEXT 1 ROWS ONLY);
DECLARE @Product2 UNIQUEIDENTIFIER = (SELECT Id FROM Products ORDER BY Id OFFSET 1 ROWS FETCH NEXT 1 ROWS ONLY);
DECLARE @Product3 UNIQUEIDENTIFIER = (SELECT Id FROM Products ORDER BY Id OFFSET 2 ROWS FETCH NEXT 1 ROWS ONLY);
DECLARE @Product4 UNIQUEIDENTIFIER = (SELECT Id FROM Products ORDER BY Id OFFSET 3 ROWS FETCH NEXT 1 ROWS ONLY);
DECLARE @Product5 UNIQUEIDENTIFIER = (SELECT Id FROM Products ORDER BY Id OFFSET 4 ROWS FETCH NEXT 1 ROWS ONLY);
INSERT INTO BillProduct (BillsId, ProductsId)
VALUES 
(@Bill1, @Product1),
(@Bill1, @Product2),
(@Bill1, @Product3),
(@Bill2, @Product4),
(@Bill2, @Product5),
(@Bill3, @Product3),
(@Bill4, @Product1),
(@Bill5, @Product5)

```
